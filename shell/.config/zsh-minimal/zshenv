#!/usr/bin/env zsh
# Minimal Zsh Environment Configuration

# XDG Base Directory Specification
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
export XDG_CACHE_HOME="${XDG_CACHE_HOME:-$HOME/.cache}"
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
export XDG_STATE_HOME="${XDG_STATE_HOME:-$HOME/.local/state}"

# Zsh Configuration - Point to minimal config
export ZDOTDIR="${ZDOTDIR:-$XDG_CONFIG_HOME/zsh-minimal}"
export ZSH_CACHE_DIR="${ZSH_CACHE_DIR:-$XDG_CACHE_HOME/zsh}"

# Default Applications
export EDITOR="${EDITOR:-vim}"
export VISUAL="${VISUAL:-$EDITOR}"
export PAGER="${PAGER:-less}"
export BROWSER="${BROWSER:-firefox}"

# Less Configuration
export LESS='-R -F -X'
export LESSHISTFILE="${XDG_STATE_HOME}/less/history"

# Path Configuration
typeset -U path
path=(
    "$HOME/.local/bin"
    "$HOME/bin"
    /usr/local/bin
    $path
)

# Remove non-existent directories from PATH
path=($^path(N-/))

# Create necessary directories
[[ ! -d "$ZSH_CACHE_DIR" ]] && mkdir -p "$ZSH_CACHE_DIR"
[[ ! -d "${LESSHISTFILE:h}" ]] && mkdir -p "${LESSHISTFILE:h}"