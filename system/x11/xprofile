#!/bin/sh
# X11 session configuration

# Disable system beep
xset -b

# Screen timeout managed by xss-lock
# Screen saver: 20 minutes (1200s) before lock
# DPMS: 30 minutes (1800s) standby/suspend/off
xset s 1200
xset dpms 1800 1800 1800

# Set GTK theme
export GTK_THEME=Arc-Dark

# Firefox GTK integration
export MOZ_USE_XINPUT2=1
export MOZ_ENABLE_WAYLAND=0
export MOZ_GTK_TITLEBAR_DECORATION=client

# Keyboard repeat rate (optional, adjust as needed)  
# xset r rate 300 50

# Mouse acceleration (optional, adjust as needed)
# xset m 2 1

# D-Bus and desktop integration fixes
# Ensure D-Bus session is properly initialized
if [ -z "$DBUS_SESSION_BUS_ADDRESS" ]; then
    eval $(dbus-launch --sh-syntax --exit-with-session)
fi

# Import environment to systemd user session for better service integration
systemctl --user import-environment PATH DISPLAY XDG_CURRENT_DESKTOP XDG_SESSION_DESKTOP
