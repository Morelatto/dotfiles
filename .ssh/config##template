# SSH Configuration Template
# Host-specific SSH settings using yadm templating

# Default settings
Host *
    ServerAliveInterval 60
    ServerAliveCountMax 3
    ControlMaster auto
    ControlPersist 300
    ControlPath ~/.ssh/sockets/%r@%h-%p

{% if yadm.class == "Work" %}
# Work-specific hosts
Host work-server
    HostName work.company.com
    User {{ yadm.user }}
    Port 2222
    IdentityFile ~/.ssh/work_rsa

Host gitlab-work
    HostName gitlab.company.com
    User git
    IdentityFile ~/.ssh/work_rsa
    Port 2222
{% endif %}

{% if yadm.class == "Personal" %}
# Personal hosts
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa

Host *
    IdentityFile ~/.ssh/id_rsa
{% endif %}

# Create socket directory if it doesn't exist
Host *
    ControlPath ~/.ssh/sockets/%r@%h-%p