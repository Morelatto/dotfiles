#!/usr/bin/env bash
# Static caffeine icon for i3blocks - just shows the icon state
# Click handling is done by i3blocks command

STATE_FILE="/tmp/.caffeine_active_${USER}"

# Handle clicks to toggle
if [ -n "$BLOCK_BUTTON" ]; then
    if [ -f "$STATE_FILE" ]; then
        # Turn OFF
        rm -f "$STATE_FILE"
        xset +dpms
        xset s 1200
        xset dpms 1800 1800 1800
    else
        # Turn ON
        touch "$STATE_FILE"
        xset -dpms
        xset s off
    fi
fi

# Output simple emoji icon that always works
if [ -f "$STATE_FILE" ]; then
    # ON - Sun emoji (screen stays awake)
    echo " ‚òÄÔ∏è "        # Sun emoji - bright/awake
    echo " ‚òÄÔ∏è "        # Short text
    echo "#FFA500"     # Orange/yellow sun color
else
    # OFF - Moon emoji (screen will sleep)
    echo " üåô "        # Moon emoji - sleep mode
    echo " üåô "        # Short text  
    echo "#D3D3D3"     # Light gray
fi